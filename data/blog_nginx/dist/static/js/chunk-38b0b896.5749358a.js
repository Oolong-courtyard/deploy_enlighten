(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-38b0b896"],{2999:function(t,e,i){},5369:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{position:"relative","background-color":"#EFEFEF",width:"100%",height:"100%"}},[i("div",{staticStyle:{position:"fixed",height:"60px",width:"100%","background-color":"white","z-index":"999"}},[i("div",{style:"margin-left:"+t.marginLeft+"px"},[i("nav-bar",{ref:"navbar"})],1)]),i("div",{staticStyle:{height:"35px","background-color":"#EFEFEF"}}),i("div",{staticClass:"contentDiv",style:"margin-left:"+t.marginLeft+"px"},[i("ul",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll"},{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{overflow:"hidden","font-size":"30px"},attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","infinite-scroll-immediate":!1,"infinite-scroll-distance":300}},[t._l(t.resListData,function(e,n){return i("li",{staticStyle:{"list-style":"none"}},[i("div",{staticClass:"item-list"},[i("div",{staticStyle:{width:"80%"}},[i("div",{staticStyle:{"text-align":"left","font-size":"10px",color:"#B2BAC2"}},[t._v("\n                "+t._s(e.author)+" · "+t._s(t._f("transPublishTime")(e.publish_time,e.publish_time))+" ·\n                "+t._s(e.category)+"\n              ")]),i("div",{staticClass:"article-name article-name2",on:{click:function(i){t.getArticleDetail(e.article_id)}}},[t._v("\n                "+t._s(e.article_name)+"\n              ")]),i("div",{staticStyle:{"margin-top":"20px"}},[i("el-button",{staticClass:"starStyle",style:{"background-color":-1==t.userArticleStars.indexOf(e.article_id)?"":"#66AEE1"},on:{click:function(i){t.clickStarCount(n,e.article_id,e.star_count)}}},[i("div",{style:{color:-1==t.userArticleStars.indexOf(e.article_id)?"":"white"}},[t._v("\n                    👍 "+t._s(e.star_count)+"\n                  ")])]),i("el-button",{staticClass:"commentStyle",on:{click:function(i){t.clickCommentCount(n,e.article_id,e.comment_count)}}},[t._v("\n                  评论 "+t._s(e.comment_count)+"\n                ")])],1)])]),i("hr",{staticStyle:{height:"1px",border:"none","border-top":"1px solid #C8C8C8"}})])}),t.noMore?i("div",{staticClass:"noMoreList"},[t._v("\n          已经到底啦!\n        ")]):i("div",{staticClass:"readMore"},[t._v("\n          阅读更多\n        ")])],2)])])},a=[],s=(i("6b54"),i("28a5"),i("96cf"),i("3b8d")),o=i("ffb0"),r=function(){return i.e("chunk-2cb4a0da").then(i.bind(null,"f272"))},l={name:"myPublishArticle",components:{NavBar:r},data:function(){return{marginLeft:.45*(document.documentElement.clientWidth-1e3),recommendAuthor:["作者1","作者2","作者3","作者4"],class1:["推荐","后端","前端","iOS","Android"],page:1,current_article_index:0,loading:!1,res_list_data_len:0,resListData:[],res_detail_data:{},categoryTag:"推荐",noMore:!1,lastClick:"isCategory",searchInputValue:"",userArticleStars:[]}},created:function(){this.getArticleList()},methods:{clickStarCount:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(e,i,n){var a=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:console.log("localStorage中用户点赞文章列表是",localStorage.getItem("userArticleStars")),null===localStorage.getItem("username")&&(this.$refs.navbar.loginDialogFormVisible=!0),null!=localStorage.getItem("username")&&this.$http.put(this.$Star,{user_id:localStorage.getItem("userId"),article_id:i,action:-1==this.userArticleStars.indexOf(i)?"1":"0"},{headers:{"x-token":localStorage.getItem("userToken")}}).then(function(t){if(console.log("点赞/取消点赞成功后返回的res是",t),console.log("点赞/取消点赞成功后返回的res的status是",t.status),200==t.status){var n=-1==a.userArticleStars.indexOf(i)?"1":"0";console.log("action是",n);var s=localStorage.getItem("userArticleStars").split(",");if("1"==n){a.userArticleStars.push(i),s.push(i);var o=s.toString();localStorage.setItem("userArticleStars",o),a.resListData[e].star_count+=1}else if("0"==n){console.log("this.resListData[index].star_count",a.resListData[e].star_count),console.log("this.resListData是",a.resListData),a.resListData[e].star_count-=1,a.userArticleStars.splice(a.userArticleStars.indexOf(i),1),s.splice(s.indexOf(i),1);var r=s.toString();localStorage.setItem("userArticleStars",r)}}}).catch(function(t){403==t.response.status?(a.$message({message:"token过期,请重新登录",type:"warning"}),setTimeout(function(){a.$refs.navbar.loginDialogFormVisible=!0},500)):a.$message({message:"操作失败,请稍后重试",type:"warning"}),console.log("点赞/取消点赞失败后返回的res是",t)});case 3:case"end":return t.stop()}},t,this)}));function e(e,i,n){return t.apply(this,arguments)}return e}(),getArticleList:function(){var t=this;this.$http.get(this.$publishArticleList+"?page="+this.page.toString()+"&origin=enlighten").then(function(e){t.resListData=t.resListData.concat(e.data.data),t.page+=1}).catch(function(t){console.log("获取发布文章列表失败")})},getArticleDetail:function(t){window.open(this.$articleDetailWholeUrl+"?id="+"".concat(t))}},filters:{transPublishTime:function(t){return Object(o["a"])(t)}}},c=l,u=(i("e35a"),i("2877")),g=Object(u["a"])(c,n,a,!1,null,"447b0bd0",null);g.options.__file="myPublishArticle.vue";e["default"]=g.exports},e35a:function(t,e,i){"use strict";var n=i("2999"),a=i.n(n);a.a}}]);